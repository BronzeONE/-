<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Кабинет тестировщика</title>
  <!-- Flowbite CSS -->
  <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-50">
  <header class="bg-white shadow-sm border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
      <div class="flex flex-col gap-1">
        <img src="logo.svg" alt="ShopTest" class="h-10" />
        <h1 class="text-sm font-semibold text-gray-900">Кабинет тестировщика</h1>
      </div>
      <div class="nav-actions">
        <div class="nav-auth-group" id="nav-auth-group">
          <button type="button" id="nav-show-login">Войти</button>
          <button type="button" id="nav-show-register">Зарегистрироваться</button>
        </div>
        <button type="button" id="nav-profile" class="nav-profile-btn hidden">
          <span class="nav-profile-label">Профиль</span>
          <span class="nav-profile-status" id="auth-status">Не авторизован</span>
        </button>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 py-8">
    <section id="registration-section">
      <div class="max-w-md mx-auto bg-white rounded-lg shadow p-6">
        <h2 class="text-2xl font-bold mb-6">Регистрация</h2>
        <form id="registration-form">
          <label>
            Телефон:
            <input type="tel" name="phone_number" placeholder="+7..." required>
          </label>
          <label>
            Имя:
            <input type="text" name="first_name">
          </label>
          <label>
            Фамилия:
            <input type="text" name="last_name">
          </label>
          <label>
            Email:
            <input type="email" name="email">
          </label>
          <label>
            Пароль:
            <input type="password" name="password" required minlength="8">
          </label>
          <button type="submit">Зарегистрироваться</button>
        </form>
      </div>
    </section>

    <section id="login-section" class="hidden">
      <div class="max-w-md mx-auto bg-white rounded-lg shadow p-6">
        <h2 class="text-2xl font-bold mb-6">Вход</h2>
        <form id="login-form">
          <label>
            Телефон:
            <input type="tel" name="phone_number" placeholder="+7..." required>
          </label>
          <label>
            Пароль:
            <input type="password" name="password" required>
          </label>
          <button type="submit">Войти</button>
        </form>
      </div>
    </section>

    <section id="profile-section" class="hidden">
      <div class="profile-header">
        <div class="progress-indicator">
          <div class="progress-circle" id="progress-circle">
            <span id="current-step">1</span>/6
          </div>
          <h2 id="step-title">Базовая информация</h2>
        </div>
      </div>
      
      <form id="profile-form" class="multi-step-form bg-white rounded-lg shadow p-6" novalidate>
        <!-- Шаг 1: Базовая информация -->
        <div class="form-step" data-step="1">
          <label>ФИО или псевдоним блогера *:
            <input type="text" name="full_name" required>
          </label>
          <label>Есть ли у вас самозанятость? *:
            <select name="has_self_employment" required>
              <option value="">Выберите...</option>
              <option value="true">Да</option>
              <option value="false">Нет</option>
            </select>
          </label>
          <label>Готовы ли вы оформить самозанятость? *:
            <select name="ready_for_self_employment" required>
              <option value="">Выберите...</option>
              <option value="yes">Да</option>
              <option value="no">Нет</option>
              <option value="maybe">Возможно</option>
            </select>
          </label>
          <label>Ссылка на основной блог *:
            <input type="url" name="main_blog_link" placeholder="Instagram/TikTok/YouTube/Telegram и др." required>
          </label>
          <label>Ссылки на все активные соцсети *:
            <div id="social-links-container">
              <input type="url" name="social_links[]" placeholder="https://..." required>
            </div>
            <button type="button" class="add-more-btn" onclick="addSocialLink()">+ Добавить еще</button>
          </label>
          <label>Страна *:
            <input type="text" name="country" required>
          </label>
          <label>Город проживания *:
            <input type="text" name="city" required>
          </label>
          <label>Возраст *:
            <input type="number" name="age" min="1" max="120" required>
          </label>
          <label>Пол *:
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="gender" value="M" required>
                <span>М</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="gender" value="F" required>
                <span>Ж</span>
              </label>
            </div>
          </label>
          <label>Город(а)/регионы охвата (где основная ЦА) *:
            <input type="text" name="coverage_regions" required>
          </label>
        </div>

        <!-- Шаг 2: Контент и платформа -->
        <div class="form-step hidden" data-step="2">
          <label>Платформы, на которых ведёшь блог *:
            <div id="platforms-container">
              <input type="text" name="platforms[]" placeholder="Например: Instagram" required>
            </div>
            <button type="button" class="add-more-btn" onclick="addPlatform()">+ Добавить еще</button>
            <small>(можно выбрать несколько)</small>
          </label>
          <label>Тематика блога *:
            <div id="blog-topics-container">
              <input type="text" name="blog_topics[]" placeholder="Например: Косметика" required>
            </div>
            <button type="button" class="add-more-btn" onclick="addBlogTopic()">+ Добавить еще</button>
            <small>(можно выбрать несколько)</small>
          </label>
          <label>Краткое описание блога *:
            <textarea name="blog_description" required></textarea>
          </label>
          <label>Как давно ведёшь блог? *:
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="blog_experience" value="<6months" required>
                <span>До 6 месяцев</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="blog_experience" value="6months-1year" required>
                <span>6 мес - 1 год</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="blog_experience" value="1-2years" required>
                <span>1-2 года</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="blog_experience" value=">2years" required>
                <span>Более 2 лет</span>
              </label>
            </div>
          </label>
          <label>Частота публикаций *:
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="publication_frequency" value="daily" required>
                <span>Ежедневно</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="publication_frequency" value="few_times_week" required>
                <span>Несколько раз в неделю</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="publication_frequency" value="once_week" required>
                <span>Раз в неделю</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="publication_frequency" value="less_often" required>
                <span>Реже</span>
              </label>
            </div>
          </label>
        </div>

        <!-- Шаг 3: Аудитория -->
        <div class="form-step hidden" data-step="3">
          <label>Общее количество подписчиков по платформам *:
            <div id="subscribers-container">
              <input type="text" name="subscribers_by_platform[]" placeholder="Платформа: количество" required>
            </div>
            <button type="button" class="add-more-btn" onclick="addSubscriber()">+ Добавить еще</button>
            <small>(указать по каждой)</small>
          </label>
          <label>Средний охват постов/сторис/видео *:
            <div id="reach-container">
              <input type="text" name="average_reach[]" placeholder="Канал: охват" required>
            </div>
            <button type="button" class="add-more-btn" onclick="addReach()">+ Добавить еще</button>
            <small>(по каждому каналу)</small>
          </label>
          <label>Пол и возраст аудитории:
            <textarea name="audience_gender_age" placeholder="Если есть статистика"></textarea>
            <small>(если есть статистика)</small>
          </label>
          <label>Основной регион/страна аудитории:
            <input type="text" name="audience_region">
          </label>
          <label>Уровень вовлечённости *:
            <input type="text" name="engagement_level" placeholder="% или просто: низкий / средний / высокий" required>
            <small>(если знаешь, % или просто: низкий / средний / высокий)</small>
          </label>
        </div>

        <!-- Шаг 4: Опыт и сотрудничество -->
        <div class="form-step hidden" data-step="4">
          <label class="checkbox">
            <input type="checkbox" name="has_collaborations">
            <span>Были ли у тебя уже рекламные коллаборации?</span>
          </label>
          <small>(по умолчанию - нет)</small>
          <label>Примеры успешных коллабораций:
            <div id="collaborations-container">
              <input type="text" name="collaboration_examples[]" placeholder="Кейсы, ссылки, бренды">
            </div>
            <button type="button" class="add-more-btn" onclick="addCollaboration()">+ Добавить еще</button>
            <small>(кейсы, ссылки, бренды)</small>
          </label>
          <label>Готов(а) делиться результатами *:
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="ready_to_share_results" value="yes" required>
                <span>Да</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="ready_to_share_results" value="no" required>
                <span>Нет</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="ready_to_share_results" value="by_agreement" required>
                <span>По договорённости</span>
              </label>
            </div>
            <small>(скриншоты охватов, статистики)</small>
          </label>
          <label>Готов(а) делать рекламу по договору/купленным сделкам? *:
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="ready_for_paid_ads" value="yes_no_problem" required>
                <span>Да, без проблем</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="ready_for_paid_ads" value="depends_on_conditions" required>
                <span>Зависит от условий</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="ready_for_paid_ads" value="no" required>
                <span>Нет</span>
              </label>
            </div>
          </label>
        </div>

        <!-- Шаг 5: Формат сотрудничества -->
        <div class="form-step hidden" data-step="5">
          <label>Какие форматы сотрудничества тебе интересны? *:
            <div id="formats-container">
              <input type="text" name="collaboration_formats[]" required>
            </div>
            <button type="button" class="add-more-btn" onclick="addFormat()">+ Добавить еще</button>
            <small>(Можно выбрать несколько)</small>
          </label>
          <label>Стоимость рекламы *:
            <div id="pricing-container">
              <input type="text" name="ad_pricing[]" placeholder="Соцсеть, тип - стоимость" required>
            </div>
            <button type="button" class="add-more-btn" onclick="addPricing()">+ Добавить еще</button>
            <small>(Укажи прайс за каждый формат. Пример: Соцсеть, тип - стоимость)</small>
          </label>
          <label>Готов(а) на бартерное сотрудничество? *:
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="ready_for_barter" value="yes" required>
                <span>Да</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="ready_for_barter" value="no" required>
                <span>Нет</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="ready_for_barter" value="depends_on_product" required>
                <span>Зависит от товара/условий</span>
              </label>
            </div>
          </label>
          <label>Какие категории товаров тебе интересны для бартерных? *:
            <div id="barter-categories-container">
              <input type="text" name="barter_categories[]" required>
            </div>
            <button type="button" class="add-more-btn" onclick="addBarterCategory()">+ Добавить еще</button>
            <small>(Можно выбрать несколько)</small>
          </label>
        </div>

        <!-- Шаг 6: Дополнительно -->
        <div class="form-step hidden" data-step="6">
          <label>Готов(а) участвовать в проектах/промо-акциях/челленджах от брендов? *:
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="ready_for_brand_projects" value="yes" required>
                <span>Да</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="ready_for_brand_projects" value="maybe_depends" required>
                <span>Возможно, смотря на условия</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="ready_for_brand_projects" value="no" required>
                <span>Нет</span>
              </label>
            </div>
          </label>
          <label>Какой товар не будешь рекламировать точно?:
            <textarea name="products_wont_advertise"></textarea>
          </label>
          <label>Ты сам(а) ведёшь блог или есть команда/менеджер? *:
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="blog_management" value="myself" required>
                <span>Сам(а)</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="blog_management" value="assistant_manager" required>
                <span>Есть помощник/менеджер</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="blog_management" value="agency" required>
                <span>Агентство</span>
              </label>
            </div>
          </label>
          <label>Есть ли у тебя медиа-кит?:
            <select name="has_media_kit" onchange="toggleMediaKitLink(this)">
              <option value="">Выберите...</option>
              <option value="true">Да</option>
              <option value="false">Нет</option>
            </select>
          </label>
          <label id="media-kit-link-label" class="hidden">Ссылка на медиа-кит:
            <input type="url" name="media_kit_link" placeholder="https://...">
            <small>(Ссылка)</small>
          </label>
          <label>Согласен(на) ли ты участвовать в закрытом сообществе блогеров для коллабораций и предложений от брендов? *:
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="ready_for_blogger_community" value="yes" required>
                <span>Да</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="ready_for_blogger_community" value="maybe" required>
                <span>Возможно</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="ready_for_blogger_community" value="no" required>
                <span>Нет</span>
              </label>
            </div>
          </label>
          <label>Дополнительная информация, пожелания, ссылки на видео/о...:
            <textarea name="additional_info"></textarea>
          </label>
          <label class="checkbox">
            <input type="checkbox" name="consent_privacy" required>
            <span>Нажимая кнопку «Отправить», я даю свое согласие на обработку моих персональных данных, в соответствии с Федеральным законом от 27.07.2006 года №152-ФЗ «О персональных данных», на условиях и для целей, определенных в Согласии на обработку персональных данных *</span>
          </label>
          <label class="checkbox">
            <input type="checkbox" name="consent_marketing_email">
            <span>Я согласен(на) получать рекламные и информационные материалы от ООО "СОЛЮШЕН" на указанный email.</span>
          </label>
          <label class="checkbox">
            <input type="checkbox" name="consent_marketing_calls">
            <span>Я согласен(на) на получение информационных и рекламных звонков от ООО «СОЛЮШЕН»</span>
          </label>
        </div>

        <div class="form-navigation">
          <button type="button" id="prev-step-btn" class="btn-secondary hidden">Назад</button>
          <button type="button" id="next-step-btn" class="btn-primary">Далее</button>
          <button type="submit" id="submit-btn" class="btn-primary hidden">Отправить</button>
        </div>
      </form>
      
      <div class="profile-meta bg-white rounded-lg shadow p-6 mt-6">
        <span id="profile-status"></span>
        <button id="participation-toggle" data-active="false">Участвовать в заказах</button>
      </div>
    </section>

    <section id="orders-section" class="hidden">
      <div class="bg-white rounded-lg shadow p-6">
        <h2>Заказы для подтверждения</h2>
        <ul id="orders-list"></ul>
      </div>
    </section>

    <section id="purchases-section" class="hidden">
      <div class="bg-white rounded-lg shadow p-6">
        <h2>Мои заказы</h2>
        <ul id="purchases-list"></ul>
      </div>
    </section>

    <section id="test-report-section" class="hidden">
      <div class="report-header">
        <h2>Отчёт о тестировании</h2>
        <button type="button" id="close-report-btn" class="close-btn">✕</button>
      </div>
      <form id="test-report-form" novalidate>
        <input type="hidden" name="purchase_id" id="report-purchase-id">
        
        <!-- 1) Идентификация задания -->
        <fieldset>
          <legend>1) Идентификация задания</legend>
          <label>ФИО *:
            <input type="text" name="full_name" required>
          </label>
          <label>Телефон/Telegram *:
            <input type="text" name="contact" required>
          </label>
          <label>Название товара/кейса *:
            <input type="text" name="item_name" required>
          </label>
          <label>Категория *:
            <select name="category" required>
              <option value="">Выберите...</option>
              <option value="cosmetics">Косметика</option>
              <option value="clothing">Одежда</option>
              <option value="tech">Техника</option>
              <option value="home">Дом</option>
              <option value="other">Другое</option>
            </select>
          </label>
          <label>Дата получения *:
            <input type="date" name="received_at" required>
          </label>
          <label>Дата завершения *:
            <input type="date" name="completed_at" required>
          </label>
        </fieldset>

        <!-- 2) Подтверждение выполнения -->
        <fieldset>
          <legend>2) Подтверждение выполнения</legend>
          <label>Тип отчёта:
            <select name="report_type">
              <option value="">Выберите...</option>
              <option value="publication">Публикация</option>
              <option value="marketplace_review">Отзыв на МП</option>
              <option value="photo_report">Фото-отчёт</option>
              <option value="video_report">Видео-отчёт</option>
              <option value="other">Другое</option>
            </select>
          </label>
          <label>Ссылки на материалы:
            <div id="proof-links-container">
              <input type="url" name="proof_links[]" placeholder="https://...">
            </div>
            <button type="button" class="add-more-btn" onclick="addProofLink()">+ Добавить еще</button>
          </label>
          <label>Загрузка файлов (фото/видео/скрины, до 5):
            <input type="file" name="proof_files" multiple accept="image/*,video/*" id="proof-files-input">
            <div id="proof-files-list"></div>
          </label>
        </fieldset>

        <!-- 3) Количественные оценки -->
        <fieldset>
          <legend>3) Количественные оценки (универсальные шкалы 1–5)</legend>
          <label>Общее впечатление (1-5):
            <input type="number" name="score_overall" min="1" max="5">
          </label>
          <label>Соответствие ожиданиям/описанию (1-5):
            <input type="number" name="score_expectation_fit" min="1" max="5">
          </label>
          <label>Качество/эффективность (1-5):
            <input type="number" name="score_quality_effect" min="1" max="5">
          </label>
          <label>Удобство использования/применения (1-5):
            <input type="number" name="score_usability" min="1" max="5">
          </label>
          <label>Соотношение цена/качество (1-5):
            <input type="number" name="score_value_for_money" min="1" max="5">
          </label>
          <label>Готовность рекомендовать (NPS-лайт, 0-10):
            <input type="number" name="score_recommend" min="0" max="10">
          </label>
        </fieldset>

        <!-- 4) Качественная обратная связь -->
        <fieldset>
          <legend>4) Качественная обратная связь</legend>
          <label>Что понравилось?:
            <textarea name="likes" rows="3"></textarea>
          </label>
          <label>Что улучшить?:
            <textarea name="improvements" rows="3"></textarea>
          </label>
          <label>Комментарий/отзыв (до 1000 симв.):
            <textarea name="review_text" rows="5" maxlength="1000"></textarea>
            <small id="review-text-count">0/1000</small>
          </label>
          <label>3 слова-эмоции о товаре:
            <input type="text" name="emotions_3_words" placeholder="например: радость, восторг, удивление">
          </label>
        </fieldset>

        <!-- 5) Условия и итоги -->
        <fieldset>
          <legend>5) Условия и итоги</legend>
          <label class="checkbox">
            <input type="checkbox" name="issues_occured">
            <span>Опыт проблем/дефектов</span>
          </label>
          <label id="issues-note-label" class="hidden">Описание проблем:
            <textarea name="issues_note" rows="3"></textarea>
          </label>
          <label>Купили бы сами?:
            <select name="would_buy">
              <option value="">Выберите...</option>
              <option value="yes">Да</option>
              <option value="no">Нет</option>
              <option value="depends_on_price">Зависит от цены</option>
            </select>
          </label>
          <label class="checkbox">
            <input type="checkbox" name="ready_for_next">
            <span>Готовность к повторному тесту</span>
          </label>
          <label class="checkbox">
            <input type="checkbox" name="consent_truthful" required>
            <span>Подтверждаю достоверность данных *</span>
          </label>
          <label class="checkbox">
            <input type="checkbox" name="consent_use_materials" required>
            <span>Разрешаю использовать материалы в отчётности/на сайте *</span>
          </label>
        </fieldset>

        <div class="form-navigation">
          <button type="submit" class="btn-primary">Сохранить отчёт</button>
        </div>
      </form>
    </section>
  </main>

  <footer class="bg-white border-t border-gray-200 mt-12 py-6">
    <div class="max-w-7xl mx-auto px-4 text-center text-gray-600 text-sm">
      © 2024 Кабинет тестировщика. Все права защищены.
    </div>
  </footer>

  <div id="toast" class="hidden"></div>

  <!-- Flowbite JS -->
  <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>
  <script src="app.js"></script>
</body>
</html>

